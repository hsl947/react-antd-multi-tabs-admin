<h1 align="center">Antd Multi Tabs Admin</h1>

<div align="center">ğŸ› ï¸Antdå¤šæ ‡ç­¾é¡µåå°ç®¡ç†æ¨¡æ¿ğŸ› ï¸</div>

<div align="center">
ç”±äºä¸šåŠ¡ä¸Šæœ‰å¤šé¡µç­¾éœ€æ±‚ï¼Œç½‘ä¸Šæ‰¾äº†ä¸€åœˆï¼Œéƒ½æ˜¯åŸºäºantd proçš„æ¨¡æ¿ï¼Œå¤ªé‡äº†ï¼Œä¸å–œæ¬¢ğŸ˜’ã€‚<br/>
äºæ˜¯è‡ªå·±ä»ä»¥å‰çš„æ¡†æ¶ä¸Šæ”¹é€ ï¼Œæ­äº†è¿™ä¹ˆä¸€ä¸ªç²¾ç®€ç‰ˆæ¡†æ¶ï¼Œç”¨å¾—ä¹Ÿèˆ’æœï¼ŒåŸåˆ›ğŸ¤ªã€‚

[é¢„è§ˆåœ°å€](https://www.hongshaoli.com/antd-admin)
</div>
<br />

## ç‰¹æ€§

- ğŸ“: **ä»£ç è§„æ¨¡**ï¼šåŸåˆ›ç²¾ç®€ç‰ˆè„šæ‰‹æ¶ï¼Œä¸»å¼ æœ€å°‘ï¼Œä¸è‡ƒè‚¿
- ğŸš…: **è¿½æ±‚å‰æ²¿**ï¼šå…¨ç«™ä½¿ç”¨ `React Hooks` å¼€å‘ï¼ŒæŠ›å¼ƒ `Class`
- ğŸ’: **ä¼˜é›…ç¾è§‚**ï¼šåŸºäº `Ant Design` ä½“ç³»ç²¾å¿ƒè®¾è®¡
- ğŸš€: **æµè¡ŒæŠ€æœ¯**ï¼šä½¿ç”¨ `React/Redux/Antd` ç­‰å‰ç«¯å‰æ²¿æŠ€æœ¯å¼€å‘
- ğŸ¨: **ä¸»é¢˜æ ·å¼**ï¼šä½¿ç”¨æµè¡Œçš„`æš—é»‘æ¨¡å¼`ä¸»é¢˜ï¼Œæ”¯æŒ`æ·±/æµ…è‰²`ä¸»é¢˜åˆ‡æ¢

## ç‰¹ç‚¹

- å¤š tab é¡µç­¾â•å³é”®èœå•ï¼Œæå‡æ•ˆç‡
- Redux / Toolkit çŠ¶æ€ç®¡ç†â•æŒä¹…åŒ–
- å°è£…å®ç”¨ axios è¯·æ±‚
- åŠ¨æ€é“¾å¼é¢åŒ…å±‘å¯¼èˆª
- èœå•é¡µé¢è·¯ç”±æƒé™æ§åˆ¶
- lessâ•css module æ ·å¼éš”ç¦», ç®€å•æ ·å¼åˆ™å¯ä»¥ä½¿ç”¨tailwindcss classæ¥æ›¿ä»£
- åˆ—è¡¨â•åˆ†é¡µâ•å¤šé€‰â•æœç´¢è”åŠ¨ç»„ä»¶
- å¯è‡ªå®šä¹‰ webpack é…ç½®â•ä¼˜åŒ–æ‰“åŒ…
- apiè¯·æ±‚æ¨¡æ‹Ÿ(MSW)
- å•ç‚¹ç™»å½•(OpenId Connect)é›†æˆ

## è¿‘æœŸè§„åˆ’

- å°è¯•å¤šç§ä¸»é¢˜è‰²åˆ‡æ¢æˆ–å–è‰²å™¨åŠ¨æ€æ¢è‚¤åŠŸèƒ½ï¼ˆè°ƒç ”å¼€å‘ä¸­ğŸ‘€ï¼‰
- é›†æˆå•å…ƒæµ‹è¯• jest + enzymeï¼Œäº‰å–è¦†ç›–ç‡100%ğŸ’ªğŸ»ğŸ’ªğŸ»ï¼ˆå­¦ä¹ ä¸­ğŸ¤«ï¼‰

## åŠ¨æ€ä¸»é¢˜

ç›®å‰ `antd@4.17.0-alpha.0` å·²æ”¯æŒ[åŠ¨æ€ä¸»é¢˜](https://ant.design/docs/react/customize-theme-variable-cn)ï¼ˆå®éªŒæ€§ï¼‰ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥å»ç©ç©ï¼Œäº’ç›¸æ¢è®¨ã€‚
<br />

### é¢„è§ˆå›¾

![](https://github.com/hsl947/hsl947.github.io/raw/master/images/antd-admin-1.png)
![](https://github.com/hsl947/hsl947.github.io/raw/master/images/antd-admin-2.png)
![](https://github.com/hsl947/hsl947.github.io/raw/master/images/antd-admin-3.png)
![](https://github.com/hsl947/hsl947.github.io/raw/master/images/antd-admin-4.png)
![](https://github.com/hsl947/hsl947.github.io/raw/master/images/antd-admin-5.png)
<br />

## ä½¿ç”¨

### ä½¿ç”¨å‘½ä»¤è¡Œ

```bash
$ npm install -g typescript
$ git clone https://github.com/hsl947/react-antd-multi-tabs-admin.git
$ yarn install
$ yarn start         # è®¿é—® http://localhost:666
```

### æƒé™æ§åˆ¶

<p>å¦‚æœä¸éœ€è¦æƒé™æ§åˆ¶ï¼Œå¯è‡ªè¡Œæ³¨é‡Šå»æ‰æƒé™åŠŸèƒ½ã€‚</p>

```
# src/components/common/menu/index.tsx

// åˆ›å»ºå¯å±•å¼€çš„ç¬¬ä¸€çº§å­èœå•
const creatSubMenu = (data: any): JSX.Element => {
  // const menuItemList = []
  // data.routes.map((item: any) => {
  //   const arr = permission.filter((ele: any) => item.key === ele.code)
  //   if (arr.length > 0) {
  //     menuItemList.push(renderMenu(item))
  //   }
  //  return arr
  // })

  const menuItemList = data.routes.reduce(
    (prev: any, next: any) => [...prev, renderMenu(next)],
    []
  )

  return menuItemList.length > 0 ? (
    <SubMenu key={data.key} title={subMenuTitle(data)}>
      {menuItemList}
    </SubMenu>
  ) : null
}
```

```
# src/pages/container/index.tsx

// æ£€æŸ¥æƒé™
const checkAuth = (newPathname: string): boolean => {
  // ä¸éœ€è¦æ£€æŸ¥æƒé™çš„
  // if (noCheckAuth.includes(newPathname)) {
  //   return true
  // }
  // const { tabKey: currentKey } = getKeyName(newPathname)
  // return isAuthorized(currentKey)

  // ä¸€å®šè¿”å› true
  return !!newPathname
}

```

```
# src/components/common/tabPanes/index.tsx

// ç§»é™¤tab
const remove = (targetKey: string): void => {
  const delIndex = panes.findIndex(
    (item: CommonObjectType) => item.key === targetKey
  )
  panes.splice(delIndex, 1)

  // åˆ é™¤éå½“å‰tab
  if (targetKey !== activeKey) {
    const nextKey = activeKey
    setPanes(panes)
    setActiveKey(nextKey)
    storeTabs(panes)
    return
  }

  // åˆ é™¤å½“å‰tabï¼Œåœ°å€å¾€å‰æ¨
  const nextPath = curTab[delIndex - 1]
  const { tabKey } = getKeyName(nextPath)
  // å¦‚æœå½“å‰tabå…³é—­åï¼Œä¸Šä¸€ä¸ªtabæ— æƒé™ï¼Œå°±ä¸€èµ·å…³æ‰
  // if (!isAuthorized(tabKey) && nextPath !== '/') {
  //   remove(tabKey)
  //   history.push(curTab[delIndex - 2])
  // } else {
  //   history.push(nextPath)
  // }
  history.push(nextPath)
  setPanes(panes)
  storeTabs(panes)
}
```

### Redux/Toolkit çš„ä½¿ç”¨è¯´æ˜

ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ `redux` @Reduxjs/Toolkitæ˜¯ Reduxçš„å°è£….ä½¿ç”¨å¦‚ä¸‹ Reduxjs/Toolkit ç”¨äºå‡å°‘reduxæ¨¡æ¿ä»£ç , æŒ‰ç…§`å°±è¿‘åŸåˆ™`, åˆ†å‰²ä»£ç . ä¸€ä¸ªçŠ¶æ€ç®¡ç†å®¹å™¨åˆ‡ç‰‡ç¤ºä¾‹å¦‚ä¸‹.

```
# åœ¨/src/store/slicers
import { createSlice } from '@reduxjs/toolkit'
import type { RootState } from '@/store' // typescript intelligence

export interface AppState {
  theme: string
  collapsed: boolean // èœå•æ”¶çº³çŠ¶æ€, ç”¨äºå‚ç›´å¸ƒå±€
  menuMode: 'horizontal' | 'vertical' // èœå•æ¨¡å¼, ç”¨äºæ°´å¹³å¸ƒå±€
}

const initialState: AppState = {
  collapsed: false,
  theme: 'dark',
  menuMode: 'horizontal'
}

export const appSlice = createSlice({
  name: 'app',
  initialState,
  // The `reducers` field lets us define reducers and generate associated actions
  reducers: {
    setTheme(state, action) {
      state.theme = action.payload
    },
    // ... other setters
  }
})

// actions
export const { setCollapsed, setTheme, setMenuMode } = appSlice.actions

// getters
export const selectTheme = (state: RootState) => state.app.theme
export const selectCollapsed = (state: RootState) => state.app.collapsed
export const selectMenuMode = (state: RootState) => state.app.menuMode
// è¿”å› å·²åˆ‡ç‰‡çš„ reducer
export default appSlice.reducer

```

### è·¯ç”±/èœå•é…ç½®

```
# æ‰€æœ‰è·¯ç”±å†™åœ¨ /src/route/routes.ts ï¼ˆåŒ…æ‹¬èœå•æ çš„è·¯ç”±ï¼‰
  ç”¨äºè·¯ç”±æƒé™æ§åˆ¶

# èœå•è·¯ç”±åŸºäºè·¯ç”±ç”Ÿæˆ, è·¯ç”±é¡¹ä¸Šå¢åŠ é¢å¤–å­—æ®µæ ‡è¯†: æ˜¯å¦åœ¨èœå•æ å±•ç¤º,åŠå›¾æ ‡ç­‰ä¿¡æ¯

# ä½ ä¹Ÿå¯ä»¥åˆ†å¼€å†™, å¢å¼ºå¸¦å•å®šåˆ¶åŠŸèƒ½.
```

### å…³äºæ¢è‚¤é…ç½®

> æœ¬æ¡†æ¶æ˜¯ä½¿ç”¨ less.js å®ç°åŠ¨æ€åˆ‡æ¢ä¸»é¢˜ï¼Œjsæ–‡ä»¶åœ¨ /public/less.min.js

```
# ä¸»é¢˜é…ç½®æ–‡ä»¶åœ¨ /public/color.less

å¼•ç”¨äº† antd ç»„ä»¶åï¼ŒåŸºæœ¬ä¸éœ€è¦è‡ªå·±é¢å¤–è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼ï¼Œå› ä¸ºä¸»é¢˜æ–‡ä»¶é‡Œéƒ½æœ‰ã€‚
ä½†æ˜¯ï¼ï¼ï¼
å¦‚æœè‡ªå·±å†™äº†è‡ªå®šä¹‰ç»„ä»¶ï¼Œåˆ‡æ¢ä¸»é¢˜åæ ·å¼æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œ
åˆ™éœ€è¦è‡ªå·±åœ¨ color.less åº•éƒ¨æ·»åŠ æ·±æµ…ä¸»é¢˜å¯¹åº”çš„æ ·å¼ï¼Œå…·ä½“å‚è€ƒä¸»é¢˜æ–‡ä»¶å†…é¢å¤–é…ç½®ã€‚

```

## æ”¯æŒç¯å¢ƒ

ç°ä»£æµè§ˆå™¨åŠ IE11ã€‚

| [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/edge/edge_48x48.png" alt="IE / Edge" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)</br>IE / Edge | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png" alt="Firefox" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)</br>Firefox | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png" alt="Chrome" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)</br>Chrome | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/safari/safari_48x48.png" alt="Safari" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)</br>Safari | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/opera/opera_48x48.png" alt="Opera" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)</br>Opera |
| --------- | --------- | --------- | --------- | --------- |
| IE11, Edge| last 2 versions| last 2 versions| last 2 versions| last 2 versions

## å‚ä¸è´¡çŒ®

æˆ‘ä»¬éå¸¸æ¬¢è¿ä½ çš„è´¡çŒ®ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å’Œæˆ‘ä»¬ä¸€èµ·å…±å»º :smiley:ï¼š

- é€šè¿‡ [Issue](https://github.com/hsl947/react-antd-multi-tabs-admin/issues) æŠ¥å‘Š bugã€‚
- æäº¤ [Pull Request](https://github.com/hsl947/react-antd-multi-tabs-admin/pulls) ä¸€èµ·æ”¹è¿›ã€‚

## å‹æƒ…èµåŠ© - Sponsor

<p>å¼€æºä¸æ˜“ï¼Œè¯·æˆ‘ä»¬å–ä¸€æ¯å’–å•¡ï¼Œæˆ‘ä»¬ä¼šæ›´æœ‰åŠ¨åŠ› :smiley:</p>
<p>Open source is not easy, invite us to drink a cup of coffee, we will be more motivated.</p>
<div>
  <img src="./sponsor-imgs/wx.jpg" height="200" style="display: inline-block;"/>
  <img src="./sponsor-imgs/zfb.jpg" height="200" style="display: inline-block;"/>
  <img src="./sponsor-imgs/eth.png" height="200" style="display: inline-block;"/>
</div>
